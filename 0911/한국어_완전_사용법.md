# 🎧 내이(달팽이관) 시뮬레이터 완전 사용법
## 고등학생도 5분만에 바로 따라할 수 있는 단계별 가이드

---

## 🎯 이게 정확히 뭐야?

이것은 **인간의 달팽이관(내이)을 완전히 시뮬레이션하는 Unity 프로그램**입니다!

### 🧠 달팽이관이 뭔데?
- 귀 안쪽에 있는 달팽이 모양 기관
- 소리를 전기 신호로 바꿔서 뇌로 보내는 역할
- 20Hz~20,000Hz 소리를 24개 구역으로 나누어 처리
- 큰 소리에 계속 노출되면 청력 손상 위험!

### 🎮 이 프로그램으로 할 수 있는 것:
- **실시간 소리 분석**: 마이크로 들어오는 소리를 dB로 측정
- **청력 손상 위험도 계산**: 얼마나 위험한지 0~1 점수로 표시
- **24개 주파수 대역 분석**: 어떤 음이 들리는지 세밀하게 분석
- **3D 시각화**: 파티클과 그래프로 소리를 눈으로 확인
- **교육/연구 활용**: 의대생, 음향학 연구, 청력 보호 교육 등

---

## 🚀 5분만에 시작하기 (초보자용)

### STEP 1: Unity 프로젝트 준비
```
1. Unity 실행 (2022.3 이상 권장)
2. New Project → 3D Template 선택
3. 프로젝트 이름: "MyInnerEar" (또는 원하는 이름)
4. Create 클릭
```

### STEP 2: 스크립트 파일들 추가
```
1. Project 창에서 Assets/Scripts 폴더 생성
2. 다음 3개 파일을 Scripts 폴더에 복사:
   ✅ InnerEarReceiver.cs (메인 스크립트)
   ✅ BEGINNER_EXAMPLE_HOW_TO_USE.cs (사용 예시)
   ✅ 이 가이드 파일들
```

### STEP 3: GameObject 생성 및 설정
```
1. Hierarchy에서 우클릭 → Create Empty
2. 이름을 "InnerEar"로 변경
3. Inspector에서 "Add Component" 클릭
4. "Inner Ear Receiver" 검색 후 추가
5. "Beginner Example How To Use" 검색 후 추가
```

### STEP 4: UI 생성 (선택사항이지만 강력 추천!)
```
1. Hierarchy 우클릭 → UI → Canvas
2. Canvas 안에 다음 UI 요소들 추가:
   - Text (현재 dB 표시용) × 3개
   - Slider (위험도 진행바용) × 1개  
   - Toggle (마이크 on/off용) × 1개
   - Button (리셋용) × 1개
```

### STEP 5: UI 연결
```
1. InnerEar GameObject 선택
2. Inspector에서 "Beginner Example" 섹션 찾기
3. 만든 UI 요소들을 해당 칸에 드래그해서 연결
```

### STEP 6: 실행!
```
1. Unity Play 버튼 (▶️) 클릭
2. Console 창에서 초기화 메시지 확인
3. Inspector에서 실시간으로 변하는 숫자들 관찰
4. 마이크에 대고 말해보거나 음악 틀어보기
```

**🎉 완성! 이제 가상 달팽이관이 작동합니다!**

---

## 📊 데이터 읽는 법 (숫자들이 뭘 의미하는지)

### 🔢 Current SPL (현재 dB)
```
📈 지금 이 순간의 소리 크기

실제 예시:
- 0-20 dB: 거의 무음 (심야, 도서관)
- 30-40 dB: 속삭임 (도서관에서 "쉿")
- 50-60 dB: 일반 대화 (카페에서 대화)
- 70-80 dB: 시끄러움 (TV 큰 소리, 식당)
- 90-100 dB: 매우 시끄러움 (지하철, 오토바이)
- 110+ dB: 위험! (콘서트, 공사장)
```

### 📊 Average SPL (평균 dB)
```
📈 최근 5초간 평균 소리 크기

왜 중요한가?
- Current는 순간적으로 튀는 값
- Average는 전체적인 환경 소음
- 청력 손상은 지속적 노출이 더 위험
```

### ⚠️ Hearing Damage Risk (청력 손상 위험도)
```
🎯 0.0~1.0 사이의 점수

위험도 해석:
- 0.0-0.1: 😊 완전 안전 (걱정 없음)
- 0.1-0.3: 😐 약간 주의 (괜찮은 수준)
- 0.3-0.5: 😰 주의 필요 (조금씩 위험)
- 0.5-0.7: 🚨 경고! (진짜 조심)
- 0.7-1.0: 🆘 매우 위험! (즉시 조치)

계산 방식:
- 현재 소음 + 누적 노출시간
- 85dB 이상 8시간 = 위험
- 100dB 이상 15분 = 위험
```

### 📋 Hearing Status (청력 상태)
```
🎨 한눈에 보는 상태 요약

"Normal": 정상 😊 (초록색)
"Caution": 주의 😐 (노란색)  
"Warning": 경고 😰 (주황색)
"Danger": 위험 🚨 (빨간색)
```

---

## 🎛️ 설정값 완전 가이드

### 🎵 Cochlear Response (달팽이관 응답) 설정

#### 청각 임계값들
```
🔊 Hearing Threshold (청각 임계값): 20 dB
- 의미: 이보다 작은 소리는 못 들음
- 조정 가이드:
  * 10-15 dB: 매우 좋은 청력 (젊은이)
  * 20-25 dB: 정상 청력 (일반인)
  * 30-40 dB: 약간 저하 (나이 들거나 손상)

🚨 Damage Threshold (손상 임계값): 90 dB  
- 의미: 장시간 들으면 청력 손상
- 조정 가이드:
  * 85 dB: 매우 보수적 (극도로 안전)
  * 90 dB: 표준 (WHO 권장)
  * 95 dB: 관대함 (위험 허용)

😵 Pain Threshold (고통 임계값): 120 dB
- 의미: 이 정도면 귀가 아픔
- 보통 건드릴 필요 없음
```

#### 적응 반응
```
🔄 Adaptation Rate (적응 속도): 0.1
- 의미: 큰 소리에 얼마나 빨리 익숙해지는가
- 값 해석:
  * 0.01 = 100초에 걸쳐 천천히 적응
  * 0.1 = 10초에 걸쳐 보통 속도
  * 1.0 = 1초만에 빠르게 적응

💚 Recovery Rate (회복 속도): 0.05  
- 의미: 조용해졌을 때 얼마나 빨리 원래대로
- 보통 적응 속도보다 느려야 함
```

### ⚙️ Settings (일반 설정)

#### 측정 관련
```
⏱️ Measurement Interval (측정 간격): 0.1초
- 의미: 몇 초마다 소리를 측정할 것인가
- 성능 vs 정확도:

🐌 성능 중시 (저사양 PC/모바일):
- 0.2-0.5초: 가벼움, 약간 둔함
- 1.0초: 매우 가벼움, 많이 둔함

⚡ 정확도 중시 (고사양 PC):
- 0.05초: 매우 정확, 약간 무거움
- 0.01초: 극도로 정확, 무거움

📊 Averaging Window (평균 윈도우): 5초
- 의미: 몇 초간의 평균을 계산할 것인가
- 추천값:
  * 1-2초: 빠른 반응, 불안정
  * 5-10초: 균형 잡힌 안정성
  * 20-60초: 매우 안정, 느린 반응
```

---

## 🎤 마이크 사용법

### 마이크 권한 설정
```
Windows:
1. 설정 → 개인정보 → 마이크
2. "앱이 마이크에 액세스하도록 허용" 켜기
3. Unity도 목록에서 허용

Mac:
1. 시스템 설정 → 보안 및 개인정보보호 → 마이크
2. Unity 체크박스 켜기
```

### 마이크 테스트
```
1. Unity Play 후 Console 확인
2. "🎤 마이크 사용 중" 메시지 확인
3. 마이크에 대고 말하기 → dB 값 변화 확인
4. 안 되면 Toggle에서 마이크 off→on 해보기
```

### 마이크 감도 조정
```
Microphone Sensitivity 슬라이더:
- 0.1: 매우 둔감 (큰 소리만 감지)
- 1.0: 보통 (기본값)
- 5.0: 매우 민감 (작은 소리도 감지)
- 10.0: 극도로 민감 (거의 모든 소리)
```

---

## 🎨 3D 시각화 설정 (고급)

### 파티클 시스템 추가
```
1. Hierarchy → Create → Effects → Particle System
2. InnerEarReceiver의 "Sound Visualization"에 드래그
3. 파티클 설정 추천값:
   - Start Lifetime: 2-5초
   - Start Speed: 1-3
   - Max Particles: 100-500
   - Shape: Sphere 또는 Cone
```

### 라인 렌더러 추가 (주파수 그래프)
```
1. 빈 GameObject 생성
2. Add Component → Line Renderer
3. InnerEarReceiver의 "Frequency Response"에 드래그
4. Line Renderer 설정:
   - Width: 0.01-0.05
   - Color: Gradient (파란색→빨간색)  
   - Material: Default-Line
```

### 색상 커스터마이징
```
Inspector에서 색상 조정:
- Normal Color: 초록 (안전)
- Warning Color: 노랑 (주의)  
- Danger Color: 빨강 (위험)

추천 색상표:
- 🟢 Normal: RGB(0, 255, 0)
- 🟡 Warning: RGB(255, 255, 0)
- 🔴 Danger: RGB(255, 0, 0)
```

---

## 💻 실제 코드 사용법

### 기본 사용 (다른 스크립트에서)
```csharp
// InnerEarReceiver 찾기
InnerEarReceiver innerEar = GameObject.FindObjectOfType<InnerEarReceiver>();

// 소리 데이터 전달 (가장 중요!)
innerEar.ReceiveVibration(0.5f, 440f); // 중간 크기의 440Hz 라음

// 데이터 읽기
float currentDB = innerEar.GetCurrentLevel();        // 현재 dB
float averageDB = innerEar.GetAverageLevel();        // 평균 dB  
string status = innerEar.GetHearingStatus();         // "Normal", "Danger" 등
float risk = innerEar.GetHearingDamageRisk();        // 0.0~1.0 위험도
```

### UI 연동 예시
```csharp
// UI 업데이트 (Update 메서드에서)
void Update()
{
    float currentDB = innerEar.GetCurrentLevel();
    
    // 텍스트 업데이트
    dbText.text = $"{currentDB:F1} dB";
    
    // 색상 변경
    if (currentDB > 90f)
        dbText.color = Color.red;    // 위험
    else if (currentDB > 70f)  
        dbText.color = Color.yellow; // 주의
    else
        dbText.color = Color.green;  // 안전
    
    // 진행바 업데이트
    float risk = innerEar.GetHearingDamageRisk();
    riskSlider.value = risk;
}
```

### 마이크 연동 예시
```csharp
// 마이크 설정
AudioSource micSource = GetComponent<AudioSource>();
string micName = Microphone.devices[0];
micSource.clip = Microphone.Start(micName, true, 1, 44100);
micSource.Play();

// 마이크 데이터 읽기 (Update에서)
float[] samples = new float[1024];
micSource.GetOutputData(samples, 0);

// RMS 계산 (음량)
float rms = 0f;
for (int i = 0; i < samples.Length; i++)
{
    rms += samples[i] * samples[i];
}
float amplitude = Mathf.Sqrt(rms / samples.Length);

// InnerEarReceiver에 전달
innerEar.ReceiveVibration(amplitude, 440f); // 주파수는 별도 계산 필요
```

---

## 🐞 자주 하는 실수 & 해결법

### ❌ 실수 1: "아무 반응이 없어요!"
```
✅ 해결 순서:
1. enableRealTimeAnalysis가 체크되어 있는지 확인
2. ReceiveVibration() 메서드를 호출하고 있는지 확인
3. Console에 에러 메시지가 없는지 확인
4. Inspector에서 Measurement Data 섹션의 값들이 변하는지 확인
```

### ❌ 실수 2: "마이크가 안 돼요!"
```
✅ 해결 순서:
1. 마이크 권한 설정 확인 (위 "마이크 권한 설정" 참조)
2. 다른 프로그램에서 마이크 사용 중인지 확인
3. Unity Console에서 "마이크 사용 중" 메시지 확인
4. Use Microphone 체크박스 on/off 해보기
5. 마이크에 직접 말해보기 (너무 조용하면 감지 안됨)
```

### ❌ 실수 3: "숫자가 이상해요 (NaN, 무한대)"
```
✅ 자동 해결됨!
- 이미 모든 안전장치가 내장되어 있음
- 이상한 값이 들어와도 자동으로 보정됨
- 혹시 문제가 있다면 Console 확인
```

### ❌ 실수 4: "너무 느려요/빨라요"
```
✅ 성능 조정:

느릴 때:
- Measurement Interval → 0.05초로 줄이기
- Averaging Window → 2-3초로 줄이기

빨를 때:  
- Measurement Interval → 0.2-0.5초로 늘리기
- Averaging Window → 10-20초로 늘리기
```

### ❌ 실수 5: "UI가 연결이 안 돼요"
```  
✅ UI 연결 확인:
1. UI 요소들이 실제로 존재하는지 확인
2. Inspector에서 None (Text) 같은 항목들을 찾아서
3. Hierarchy에서 해당 UI를 직접 드래그해서 연결
4. UI 요소의 이름이 올바른지 확인
```

---

## 🎓 교육/연구 활용 아이디어

### 🏫 학교 과학 프로젝트
```
주제 아이디어:
1. "교실 소음과 학습 능력의 관계"
   - 다양한 환경에서 dB 측정
   - 집중력 테스트와 비교
   
2. "이어폰 볼륨의 청력 위험성 연구"
   - 다양한 볼륨에서 dB 측정  
   - 시간별 위험도 계산
   
3. "주파수별 청력 민감도 실험"
   - 24개 주파수 대역 분석
   - 나이/성별에 따른 차이 조사
```

### 🏥 의학/보건 교육
```
활용법:
1. 청력 보호 교육 도구
   - 실시간 위험도 시각화
   - 다양한 소음원 비교
   
2. 직업병 예방 교육
   - 작업장 소음 모니터링
   - 보호구 효과 비교

3. 이명/난청 시뮬레이션
   - 청력 손상 체험
   - 예방의 중요성 인식
```

### 🔬 공학/음향학 연구
```
연구 주제:
1. 음향 신호 처리 알고리즘 개발
2. 청각 보조기구 성능 평가  
3. 건축 음향 설계 검증
4. 음성 인식 시스템 개발
```

---

## 🚀 고급 활용법

### 데이터 저장 및 분석
```csharp
// CSV 파일로 데이터 저장
string csvLine = $"{Time.time},{innerEar.GetCurrentLevel()},{innerEar.GetHearingDamageRisk()}";
File.AppendAllText("hearing_data.csv", csvLine + "\n");
```

### 알림 시스템 구현
```csharp
// 위험 상황에서 자동 알림
if (innerEar.GetHearingDamageRisk() > 0.7f)
{
    // 화면 깜빡임
    Camera.main.backgroundColor = Color.red;
    
    // 진동 (모바일)
    Handheld.Vibrate();
    
    // 소리 알림
    warningSound.Play();
}
```

### 24개 주파수 대역 분석
```csharp
// 고급 사용자용: 각 주파수 대역별 세부 분석
CochlearResponse response = innerEar.GetCochlearResponse();

for (int i = 0; i < 24; i++)
{
    float frequency = response.frequencyBands[i];
    float activation = response.currentActivation[i];
    
    Debug.Log($"대역 {i}: {frequency:F0}Hz → 활성화 {activation:F2}");
}
```

---

## 📞 마지막 중요한 말씀

### ⚠️ 중요한 한계와 주의사항
```
이것은 교육/시뮬레이션 목적입니다!

❌ 하지 말 것:
- 실제 의학적 진단 대용으로 사용
- 전문 측정 장비 대신 사용  
- 법적/의료적 기준으로 활용

✅ 해도 좋은 것:
- 교육 및 학습 목적
- 연구 및 실험 도구
- 청력 보호 의식 향상
- 프로그래밍 학습
```

### 🎯 성공 체크리스트
```
✅ Unity에서 정상 실행됨
✅ 마이크 입력이 dB 값으로 표시됨  
✅ UI가 실시간으로 업데이트됨
✅ 위험도가 정상적으로 계산됨
✅ 큰 소리에서 경고 표시가 나타남
✅ 모든 설정값들을 이해함
✅ 다른 프로젝트에 응용할 수 있음
```

### 🚀 더 배우고 싶다면?
```
추천 학습 순서:
1. Unity 기초 → 공식 튜토리얼
2. C# 프로그래밍 → Microsoft Learn
3. 디지털 신호 처리 → 대학 강의
4. 음향학 기초 → Khan Academy
5. 의학 기초 → 해부학 교과서
```

---

**🎉 축하합니다! 이제 당신도 가상 달팽이관 전문가입니다!**

*이 가이드로 누구든지 5분만에 시작할 수 있습니다. 질문이 있으면 Unity Console의 Debug.Log를 확인하세요!*